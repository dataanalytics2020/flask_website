{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <h2>エリアから行きたい日の取材予定を地図で探す</h2>
            <p>※現在は北・南関東のみ対応しています。</p>
            <div class="row">
                <ul class="top-btn" style="list-style: none; padding: 0;  margin:0;">
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/hokkaidoutouhoku">北海道・東北</a></li>
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/kitakantou">北関東</a></li>
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/minamikantou">南関東</a></li>
                </ul>
            </div>
            <div class="row">
                <ul class="top-btn" style="list-style: none; padding: 0;  margin:0;">
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/hokurikukoushinetsu">北陸・甲信越</a></li>
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/toukai">東海</a></li>
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/kansai">関西</a></li>
                </ul>
            </div>
            <div class="row">
                <ul class="top-btn" style="list-style: none; padding: 0;  margin:0;">
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/chugokushikoku">中国・四国</a></li>
                    <li><a class="link-btn colorname1" href="/tomorrow-recommend/kyusyu">九州・山口</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <h2>都道府県から行きたい日の取材予定を地図で探す</h2>
            <form action="{{ url_for('top') }}" method="post">
                <p>調べたい都道府県を選択：</p>
                    <select class="form-select form-select-lg mb-2" 　aria-label="Default select example" name="prefecture">
                        <option selected>都道府県を選択</option>
                        {% for prefecture in data.kanto_prefecture_list %}
                            <option value="{{ prefecture }}">{{ prefecture }}</option>
                        {% endfor %}
                    </select>

                <p>調べたい日付を選択：</p>
                <select class="form-select form-select-lg mb-2" aria-label="Default select example" name="target_day">
                {% for target_day in data.jp_str_day_list %}
                    <option value="{{ target_day }}">{{ target_day }}</option>
                {% endfor %}
                </select>

                <div class="d-grid gap-2 col-6 mx-auto pb-3 pt-3">
                    <button class="btn btn-primary" type="submit" value="送信">検索</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h2>地図から行きたい店舗のお勧め機種を探す</h2>
            <div class="japan_map">
                <img src="../static/img/japanmap.png" width="1100" height="1000" alt="日本地図">
                <span class="area_btn area1" data-area="1">北海道・東北</span>
                <span class="area_btn area2" data-area="2">関東</span>
                <span class="area_btn area3" data-area="3">中部</span>
                <span class="area_btn area4" data-area="4">近畿</span>
                <span class="area_btn area5" data-area="5">中国・四国</span>
                <span class="area_btn area6" data-area="6">九州・沖縄</span>
                
                <div class="area_overlay"></div>
                <div class="pref_area">
                    <div class="pref_list" data-list="1">
                        <div data-id="北海道">北海道</div>
                        <div data-id="青森県">青森県</div>
                        <div data-id="岩手県">岩手県</div>
                        <div data-id="宮城県">宮城県</div>
                        <div data-id="秋田県">秋田県</div>
                        <div data-id="山形県">山形県</div>
                        <div data-id="福島県">福島県</div>
                        <div></div>
                    </div>
                    
                    <div class="pref_list" data-list="2">
                        <div data-id="茨城県">茨城県</div>
                        <div data-id="栃木県">栃木県</div>
                        <div data-id="群馬県">群馬県</div>
                        <div data-id="埼玉県">埼玉県</div>
                        <div data-id="千葉県">千葉県</div>
                        <div data-id="東京都">東京都</div>
                        <div data-id="神奈川県">神奈川県</div>
                        <div></div>
                    </div>
                    
                    <div class="pref_list" data-list="3">
                        <div data-id="新潟県">新潟県</div>
                        <div data-id="富山県">富山県</div>
                        <div data-id="石川県">石川県</div>
                        <div data-id="福井県">福井県</div>
                        <div data-id="山梨県">山梨県</div>
                        <div data-id="長野県">長野県</div>
                        <div data-id="岐阜県">岐阜県</div>
                        <div data-id="静岡県">静岡県</div>
                        <div data-id="愛知県">愛知県</div>
                        <div></div>
                    </div>
                    
                    <div class="pref_list" data-list="4">
                        <div data-id="三重県">三重県</div>
                        <div data-id="滋賀県">滋賀県</div>
                        <div data-id="京都府">京都府</div>
                        <div data-id="大阪府">大阪府</div>
                        <div data-id="兵庫県">兵庫県</div>
                        <div data-id="奈良県">奈良県</div>
                        <div data-id="和歌山県">和歌山県</div>
                        <div></div>
                    </div>
                    
                    <div class="pref_list" data-list="5">
                        <div data-id="鳥取県">鳥取県</div>
                        <div data-id="島根県">島根県</div>
                        <div data-id="岡山県">岡山県</div>
                        <div data-id="広島県">広島県</div>
                        <div data-id="山口県">山口県</div>
                        <div data-id="徳島県">徳島県</div>
                        <div data-id="香川県">香川県</div>
                        <div data-id="愛媛県">愛媛県</div>
                        <div data-id="高知県">高知県</div>
                        <div></div>
                    </div>
                    
                    <div class="pref_list" data-list="6">
                        <div data-id="福岡県">福岡県</div>
                        <div data-id="佐賀県">佐賀県</div>
                        <div data-id="長崎県">長崎県</div>
                        <div data-id="熊本県">熊本県</div>
                        <div data-id="大分県">大分県</div>
                        <div data-id="宮崎県">宮崎県</div>
                        <div data-id="鹿児島県">鹿児島県</div>
                        <div data-id="沖縄県">沖縄県</div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-12 text-center">
            <h1 class='mt-4'>明日の関東お勧めマップ(※タップで地図を動かせます)</h1>
            <iframe class="embed-responsive-item" scrolling="no" height="450" width="100%" src={{ data.iframe|safe }}</iframe>
            <div class="mx-auto mt-4" style="width: 400px;">
                <h2>関東明日の注目取材一覧</h2>
            </div>
            <div class = 'heatmap .table-wrap'>
                <div class="scroll_area" style="width:100%;max-width:2000px;overflow-x:scroll;">
                    <table id="syuzai_table" class="table table-striped">
                        <thead>
                            <tr>
                                {% for col in data.display_report_df_column_names %}
                                <th>
                                {{col}}
                                </th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data.display_report_df_row_data %}
                            <tr>
                                {% for col, row_ in zip(data.display_report_df_column_names, row) %}
                                    {% if col == '取材名' %}
                                        <td><a href="/tomorrow_recommend/minamikantou/syuzai/{{ row_ }}" >{{ row_ }}</a></td>
                                    {% elif col == '店舗名' %}
                                        <td><a href="/tomorrow_recommend/minamikantou/hall/{{ row_ }}" >{{ row_ }}</a></td>
                                    {% elif col == '媒体名' %}
                                        <td><a href="/tomorrow_recommend/minamikantou/media/{{ row_ }}" >{{ row_ }}</a></td>
                                    {% else %}
                                        <td>{{row_}}</td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>

<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/i18n/jquery.ui.datepicker-ja.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/cupertino/jquery-ui.min.css">  <!-- テーマcupertinoを選択 -->\
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function(){
    $("#syuzai_table").DataTable({
        "language":{url:"https://cdn.datatables.net/plug-ins/1.11.5/i18n/ja.json",},
            // 件数切替機能 無効
        lengthChange: false,
        // 検索機能 無効
        searching: true,
        // ソート機能 無効
        ordering: true,
        // 情報表示 無効
        info: true,
        // ページング機能 無効
        paging: false,
        // 初期表示の並び替えなし
        order: [],
    });
});
</script>


{% endblock %}